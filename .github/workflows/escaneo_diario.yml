name: Escaneo Diario CANSLIM

on:
schedule:
- cron: '0 4 * * *' # Se ejecuta automáticamente todos los días a las 4 AM UTC
workflow_dispatch: # Permite ejecutar el escáner manualmente desde la pestaña "Actions"

jobs:
build:
runs-on: ubuntu-latest
steps:
- name: Checkout del código
uses: actions/checkout@v3

  - name: Configurar Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.9'

  - name: Instalar dependencias
    run: |
      python -m pip install --upgrade pip
      pip install yfinance pandas numpy lxml html5lib

  - name: Ejecutar escáner real
    run: python escaner_real.py

  - name: Guardar y subir resultados
    run: |
      git config --local user.email "action@github.com"
      git config --local user.name "GitHub Action"
      git add data.json
      git commit -m "Actualización automática de datos CANSLIM" || exit 0
      git push
